"use strict";(self["webpackChunkapartment_rent"]=self["webpackChunkapartment_rent"]||[]).push([[944],{9340:function(e,t,a){a.d(t,{c:function(){return u}});var i=a(4108),l=a(9096);const s=["value"],r=["value"];function n(e,t,a,n,o,c){return(0,i.Wz)(),(0,i.An)("select",{value:a.modelValue,onChange:t[0]||(t[0]=(...e)=>c.updateValue&&c.updateValue(...e)),class:(0,l.WN)([a.styleType]),style:(0,l.MN)({width:a.width})},[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(c.formatedItems,(e=>((0,i.Wz)(),(0,i.An)("option",{key:e.value,value:e.value},(0,l.WA)(e.label),9,r)))),128))],46,s)}var o={name:"CustomSelect",props:{modelValue:{type:String,default:""},items:{type:Array,required:!0},styleType:{type:String,default:"custom-select"},width:{type:String,default:"220px"}},computed:{formatedItems(){return this.items.map((e=>"object"===typeof e?e:{value:e,label:e}))}},methods:{updateValue(e){this.$emit("update:modelValue",e.target.value)}}},c=a(4100);const m=(0,c.c)(o,[["render",n],["__scopeId","data-v-4805f5c3"]]);var u=m},3868:function(e,t,a){a.d(t,{c:function(){return u}});var i=a(4108),l=a(9096);const s=["src"],r={class:"service-item__name"};function n(e,t,a,n,o,c){return(0,i.Wz)(),(0,i.An)("div",{class:(0,l.WN)(["service-item",[{selected:o.isSelected},{selectable:a.selectable}]]),onClick:t[0]||(t[0]=(...e)=>c.toggleSelection&&c.toggleSelection(...e))},[(0,i.QD)("img",{src:a.service.icon,alt:"Іконка сервісу",class:"service-item__image"},null,8,s),(0,i.QD)("span",r,(0,l.WA)(a.service.name),1)],2)}var o={name:"ServicesInfo",props:{service:{type:Object,required:!0},selectable:{type:Boolean,default:!0}},data(){return{isSelected:!1}},methods:{toggleSelection(){this.selectable&&(this.isSelected=!this.isSelected,this.$emit("toggle-selection",this.service.name,this.isSelected))}}},c=a(4100);const m=(0,c.c)(o,[["render",n],["__scopeId","data-v-201b394f"]]);var u=m},9248:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var i=a(4108);function l(e,t,a,l,s,r){const n=(0,i.E1)("ApartmentRegister"),o=(0,i.E1)("SectionWithHeaderSpacer");return(0,i.Wz)(),(0,i.Az)(o,null,{default:(0,i.Ql)((()=>[(0,i.K2)(n)])),_:1})}var s=a(7764),r=a(9096),n=a.p+"img/left.3903720b.svg",o=a.p+"img/left_inactive.039a2cc5.svg",c=a.p+"img/right.d7e364c5.svg",m=a.p+"img/right_inactive.42ca3f3d.svg";const u={class:"register__part"},d={class:"register__part"},p={class:"register__part-address"},h={class:"register__part"},g={class:"register__part"},f={class:"services-grid"},v={class:"register__part"},D={class:"register__part-address"},y={class:"register__part"},V={class:"register__part-address"},S={class:"register__part"},_={class:"register__part-price"},b={class:"register__part"},A={class:"register__part-photo"},w={class:"register__part"},R={class:"register__part-photo"},I={key:0,class:"slider"},C=["disabled"],x={class:"slider-container"},Q=["disabled"],U={class:"btn-wrapper"};function K(e,t,a,l,K,q){const N=(0,i.E1)("MainTitle"),L=(0,i.E1)("RegularText"),W=(0,i.E1)("CustomInput"),k=(0,i.E1)("CustomSelect"),z=(0,i.E1)("CustomTextArea"),E=(0,i.E1)("ServicesInfo"),P=(0,i.E1)("FormInputFile"),T=(0,i.E1)("ButtonVue"),F=(0,i.E1)("AppContainer");return(0,i.Wz)(),(0,i.Az)(F,{class:"register"},{default:(0,i.Ql)((()=>[(0,i.K2)(N,{class:"register__title"},{default:(0,i.Ql)((()=>[(0,i.mY)("Реєстрація помешканя")])),_:1}),(0,i.QD)("form",{class:"register__form",onSubmit:t[18]||(t[18]=(0,s.Y7)(((...e)=>q.handleSubmit&&q.handleSubmit(...e)),["prevent"]))},[(0,i.QD)("div",u,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Вкажіть назву вашого житла")])),_:1}),(0,i.K2)(W,{ref:"nameInput",modelValue:K.formData.title,"onUpdate:modelValue":t[0]||(t[0]=e=>K.formData.title=e),placeholder:"Назва помешкання",autocomplete:"title",name:"title",rules:q.titleRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"])]),(0,i.QD)("div",d,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Вкажіть адресу")])),_:1}),(0,i.QD)("div",p,[(0,i.K2)(k,{items:q.cities,modelValue:K.formData.location.city,"onUpdate:modelValue":t[1]||(t[1]=e=>K.formData.location.city=e),class:"custom-select",width:"334px"},null,8,["items","modelValue"]),(0,i.K2)(W,{ref:"streetInput",modelValue:K.formData.location.street,"onUpdate:modelValue":t[2]||(t[2]=e=>K.formData.location.street=e),placeholder:"вулиця",autocomplete:"street",name:"street",rules:q.streetRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"]),(0,i.K2)(W,{ref:"buildingInput",modelValue:K.formData.location.building,"onUpdate:modelValue":t[3]||(t[3]=e=>K.formData.location.building=e),placeholder:"будинок",autocomplete:"building",name:"building",rules:q.buildingRules,class:"custom-input",width:"90px"},null,8,["modelValue","rules"]),(0,i.K2)(W,{ref:"apartmentInput",modelValue:K.formData.location.apartment,"onUpdate:modelValue":t[4]||(t[4]=e=>K.formData.location.apartment=e),placeholder:"квартира",autocomplete:"apartment",name:"apartment",class:"custom-input",width:"90px"},null,8,["modelValue"])])]),(0,i.QD)("div",h,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Додайте детальний опис житла")])),_:1}),(0,i.K2)(z,{ref:"nameInput",modelValue:K.formData.descr,"onUpdate:modelValue":t[5]||(t[5]=e=>K.formData.descr=e),placeholder:"Description",autocomplete:"description",name:"description",rules:q.descrRules,class:"custom-input",width:"100%"},null,8,["modelValue","rules"])]),(0,i.QD)("div",g,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Оберіть додаткові опції")])),_:1}),(0,i.QD)("div",f,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(q.services,(e=>((0,i.Wz)(),(0,i.Az)(E,{key:e.name+K.servicesKey,service:e,onToggleSelection:q.addToServiceList},null,8,["service","onToggleSelection"])))),128))])]),(0,i.QD)("div",v,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Вкажіть контактну інформацію")])),_:1}),(0,i.QD)("div",D,[(0,i.K2)(W,{ref:"ownerNameInput",modelValue:K.formData.owner.name,"onUpdate:modelValue":t[6]||(t[6]=e=>K.formData.owner.name=e),placeholder:"Im'я",autocomplete:"ownerName",name:"ownerName",rules:q.ownerNameRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"]),(0,i.K2)(W,{ref:"ownerPhoneInput",modelValue:K.formData.owner.phone,"onUpdate:modelValue":t[7]||(t[7]=e=>K.formData.owner.phone=e),placeholder:"телефон",autocomplete:"ownerPhone",name:"ownerPhone",rules:q.phoneRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"]),(0,i.K2)(W,{ref:"ownerEmailInput",modelValue:K.formData.owner.email,"onUpdate:modelValue":t[8]||(t[8]=e=>K.formData.owner.email=e),placeholder:"email",autocomplete:"ownerEmail",name:"ownerEmail",rules:q.emailRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"])])]),(0,i.QD)("div",y,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Вкажіть можливість розселення")])),_:1}),(0,i.QD)("div",V,[(0,i.K2)(W,{ref:"accommodationRooms",modelValue:K.formData.accommodation.livingRooms,"onUpdate:modelValue":t[9]||(t[9]=e=>K.formData.accommodation.livingRooms=e),placeholder:"к-ть житлових кімнат",autocomplete:"accommodationRooms",name:"accommodationRooms",rules:q.qtyRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"]),(0,i.K2)(W,{ref:"accommodationAdults",modelValue:K.formData.accommodation.qtyAdults,"onUpdate:modelValue":t[10]||(t[10]=e=>K.formData.accommodation.qtyAdults=e),placeholder:"к-ть розміщення дорослих",autocomplete:"accommodationAdults",name:"accommodationAdults",rules:q.qtyRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"]),(0,i.K2)(W,{ref:"accommodationChildrens",modelValue:K.formData.accommodation.qtyChildrens,"onUpdate:modelValue":t[11]||(t[11]=e=>K.formData.accommodation.qtyChildrens=e),placeholder:"к-ть розміщення дітей",autocomplete:"accommodationChildrens",name:"accommodationChildrens",rules:q.qtyRules,class:"custom-input",width:"300px"},null,8,["modelValue","rules"])])]),(0,i.QD)("div",S,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Вкажіть ціну")])),_:1}),(0,i.QD)("div",_,[(0,i.K2)(W,{ref:"priceValueInput",modelValue:K.formData.price.value,"onUpdate:modelValue":t[12]||(t[12]=e=>K.formData.price.value=e),placeholder:"ціна за добу",autocomplete:"priceValue",name:"priceValue",rules:q.priceRules,class:"custom-input",width:"120px"},null,8,["modelValue","rules"]),(0,i.K2)(k,{items:q.currencies,modelValue:K.formData.price.currency,"onUpdate:modelValue":t[13]||(t[13]=e=>K.formData.price.currency=e),class:"custom-select",width:"95px"},null,8,["items","modelValue"])])]),(0,i.QD)("div",b,[(0,i.K2)(L,{tag:"p",alignment:"left"},{default:(0,i.Ql)((()=>[(0,i.mY)("Додайте фотографії")])),_:1}),(0,i.QD)("div",A,[K.mainImageUrl?((0,i.Wz)(),(0,i.An)("div",{key:0,class:"uploaded-image",style:(0,r.MN)({backgroundImage:"url("+K.mainImageUrl+")"})},null,4)):(0,i.g1)("",!0),(0,i.K2)(P,{name:"mainPhoto",accept:"image/png, image/jpeg",multiple:!1,single:!0,label:"Завантажити основну фотографію",onChange:q.handleMainPhotoChange},null,8,["onChange"])])]),(0,i.QD)("div",w,[(0,i.QD)("div",R,[K.otherImageUrls.length>0?((0,i.Wz)(),(0,i.An)("div",I,[(0,i.QD)("button",{type:"button",class:"slider-button",style:{marginLeft:"20px"},disabled:!q.isPrevButtonActive},[q.isPrevButtonActive?((0,i.Wz)(),(0,i.An)("img",{key:0,src:n,alt:"Previous Slide",class:"slider-icon",onClick:t[14]||(t[14]=(...e)=>q.prevSlide&&q.prevSlide(...e))})):(0,i.g1)("",!0),q.isPrevButtonActive?(0,i.g1)("",!0):((0,i.Wz)(),(0,i.An)("img",{key:1,src:o,alt:"Previous Slide",class:"slider-icon",onClick:t[15]||(t[15]=(...e)=>q.prevSlide&&q.prevSlide(...e))}))],8,C),(0,i.QD)("div",x,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(q.displayedImages,((e,t)=>((0,i.Wz)(),(0,i.An)("div",{key:t,class:"slider-image"},[(0,i.QD)("div",{class:"image",style:(0,r.MN)({backgroundImage:"url("+e+")"})},null,4)])))),128))]),(0,i.QD)("button",{type:"button",class:"slider-button",style:{marginRight:"20px"},disabled:!q.isNextButtonActive},[q.isNextButtonActive?((0,i.Wz)(),(0,i.An)("img",{key:0,src:c,alt:"Next Slide",class:"slider-icon",onClick:t[16]||(t[16]=(...e)=>q.nextSlide&&q.nextSlide(...e))})):(0,i.g1)("",!0),q.isNextButtonActive?(0,i.g1)("",!0):((0,i.Wz)(),(0,i.An)("img",{key:1,src:m,alt:"Next Slide",class:"slider-icon",onClick:t[17]||(t[17]=(...e)=>q.nextSlide&&q.nextSlide(...e))}))],8,Q)])):(0,i.g1)("",!0),(0,i.K2)(P,{name:"otherPhotos",accept:"image/png, image/jpeg",multiple:!0,single:!1,label:"Завантажити інші фотографії",onMultipleChange:q.handleOtherPhotoChange},null,8,["onMultipleChange"])])]),(0,i.QD)("div",U,[(0,i.K2)(T,{class:"btn-dark",type:"submit",label:"Зареєструвати",loading:e.loading,height:"49px"},null,8,["loading"])])],32)])),_:1})}a(3248);var q=a(3408),N=a(6526),L=a(4916),W=a(3656),k=a(9340),z=a(1176),E=a(576),P=a(3868),T=a(1128),F=a(8396),B=a(3056),M={name:"ApartmentRegister",components:{AppContainer:q.c,MainTitle:N.c,RegularText:L.c,CustomInput:W.c,CustomSelect:k.c,CustomTextArea:z.c,ButtonVue:E.c,ServicesInfo:P.c,FormInputFile:T.c},data(){return{serviceList:[],mainImageUrl:"",otherImageUrls:[],currentSlide:0,servicesKey:0,formData:{title:"",location:{city:"Київ",street:"",building:"",apartment:""},accommodation:{livingRooms:"",qtyAdults:"",qtyChildrens:""},descr:"",owner:{email:"",name:"",phone:""},price:{value:"",currency:"UAH"},imageContainer:{mainImageName:"",imageFiles:[]}}}},computed:{isPrevButtonActive(){return this.currentSlide>0},isNextButtonActive(){return 2*(this.currentSlide+1)<this.otherImageUrls.length},cities(){const e=this.$store.state.technicial.cities,t=e.slice(1);return[{value:"Київ",label:"Київ",selected:!1},...t]},currencies(){const e=this.$store.state.technicial.currency,t=e.slice(1);return[{value:"UAH",label:"UAH",selected:!1},...t]},services(){return this.$store.state.technicial.services},rules(){return{isRequired:F.UD,descrLimit:F.U3,titleLimit:F.Mw,phoneValidation:F.kL,emailValidation:F.e9,minTextLimit:F.e4,numberValidation:F.GW}},descrRules(){return[this.rules.isRequired,this.rules.descrLimit(2e3)]},titleRules(){return[this.rules.isRequired,this.rules.titleLimit(200)]},streetRules(){return[this.rules.isRequired,this.rules.descrLimit(50)]},buildingRules(){return[this.rules.isRequired,this.rules.descrLimit(4)]},ownerNameRules(){return[this.rules.isRequired,this.rules.minTextLimit(2)]},emailRules(){return[this.rules.isRequired,this.rules.emailValidation]},phoneRules(){return[this.rules.isRequired,this.rules.phoneValidation]},priceRules(){return[this.rules.isRequired,this.rules.descrLimit(4)]},qtyRules(){return[this.rules.isRequired,this.rules.numberValidation]},displayedImages(){const e=2*this.currentSlide;return this.otherImageUrls.slice(e,e+2)}},methods:{resetSelectedServices(){this.serviceList=[],this.services.forEach((e=>{e.isSelected=!1}))},prevSlide(){this.currentSlide>0&&this.currentSlide--},nextSlide(){2*(this.currentSlide+1)<this.otherImageUrls.length&&this.currentSlide++},addToServiceList(e){const t=this.serviceList.indexOf(e);-1===t?this.serviceList.push(e):this.serviceList.splice(t,1)},handleMainPhotoChange(e){e&&(this.formData.imageContainer.mainImageName=e.name,this.formData.imageContainer.imageFiles.push(e),(0,B.i)(e,500,500,(e=>{this.mainImageUrl=e})))},handleOtherPhotoChange(e){Array.from(e).forEach((e=>{this.formData.imageContainer.imageFiles.push(e),(0,B.i)(e,500,500,(e=>{this.otherImageUrls.push(e)}))}))},async handleSubmit(){const e=Object.values(this.$refs).every((e=>e.isValid));if(e){const e=new FormData;e.append("title",this.formData.title),e.append("location",JSON.stringify(this.formData.location)),e.append("description",this.formData.descr),e.append("owner",JSON.stringify(this.formData.owner)),e.append("accommodation",JSON.stringify(this.formData.accommodation)),e.append("price",JSON.stringify(this.formData.price)),e.append("servicesList",this.serviceList),e.append("mainImage",this.formData.imageContainer.mainImageName),this.formData.imageContainer.imageFiles.forEach((t=>{e.append("files",t)}));try{this.$store.dispatch("technicial/startLoading"),await this.$store.dispatch("apartment/apartmentCreate",e),this.resetForm()}catch(t){this.$notify({type:"error",title:"Помилка",text:t.message})}finally{this.$store.dispatch("technicial/stopLoading")}}},resetForm(){this.serviceList=[],this.mainImageUrl="",this.otherImageUrls=[],this.currentSlide=0,this.formData={title:"",location:{city:"Київ",street:"",building:"",apartment:""},descr:"",owner:{email:"",name:"",phone:""},accommodation:{livingRooms:"",qtyAdults:"",qtyChildrens:""},price:{value:"",currency:"UAH"},imageContainer:{mainImageName:"",imageFiles:[]}},this.servicesKey++}}},Y=a(4100);const $=(0,Y.c)(M,[["render",K],["__scopeId","data-v-1a743333"]]);var O=$,H=a(940),j={name:"RegisterApartmentPage",components:{ApartmentRegister:O,SectionWithHeaderSpacer:H.c}};const J=(0,Y.c)(j,[["render",l]]);var G=J}}]);
//# sourceMappingURL=944.e7fc6eab.js.map