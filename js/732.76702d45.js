"use strict";(self["webpackChunkapartment_rent"]=self["webpackChunkapartment_rent"]||[]).push([[732],{8396:function(t,e,a){a.d(e,{Ck:function(){return r},GW:function(){return d},MX:function(){return i},Mw:function(){return c},U3:function(){return l},UD:function(){return n},e4:function(){return o},e9:function(){return s},kL:function(){return u}});const n=t=>({hasPassed:!!t,message:"Будь ласка, заповніть це поле"}),r=t=>e=>({hasPassed:e.length<=t,message:"Ви перевищили ліміт"}),s=t=>({hasPassed:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(t),message:"Невірна адреса пошти"}),i=t=>({hasPassed:/^(?=.*[A-Za-z])(?=.*[\d])[a-zA-Z0-9]{7,256}$/.test(t),message:"Пароль повинен містити одну цифру й один символ"}),l=t=>e=>({hasPassed:e.length<=t,message:"Ви перевищили ліміт"}),c=t=>e=>({hasPassed:e.length<=t,message:"Ви перевищили ліміт, можливо використати 300 символів"}),o=t=>e=>({hasPassed:e.length>=t,message:`Вкажіть більше ніж ${t} символ(а/ів)`}),u=t=>({hasPassed:/^\+?[\d\s\-()]{10,15}$/.test(t),message:"Невірний номер телефону"}),d=t=>{const e=Number(t);return{hasPassed:!isNaN(e)&&e>=1&&e<=20,message:"Число повинно бути від 1 до 20"}}},576:function(t,e,a){a.d(e,{c:function(){return u}});var n=a(4108),r=a(9096);const s=["type"];function i(t,e,a,i,l,c){return(0,n.Wz)(),(0,n.An)("button",(0,n.Gu)({type:a.type},t.$attrs,{class:[a.styleType],onClick:e[0]||(e[0]=(...t)=>c.handleClick&&c.handleClick(...t)),style:{height:a.height}}),(0,r.WA)(a.label),17,s)}var l={name:"ButtonVue",props:{type:{type:String,default:"button"},styleType:{type:String,default:"btn-dark"},label:{type:String,default:"Натисніть мене"},height:{type:String,default:"40px"}},methods:{handleClick(){}}},c=a(4100);const o=(0,c.c)(l,[["render",i],["__scopeId","data-v-bfb273a8"]]);var u=o},3656:function(t,e,a){a.d(e,{c:function(){return p}});var n=a(4108),r=a(9096);const s={class:"wrapper-input"},i=["value","placeholder"],l={key:0,class:"custom-input__error"};function c(t,e,a,c,o,u){return(0,n.Wz)(),(0,n.An)("div",s,[(0,n.QD)("input",(0,n.Gu)({value:a.modelValue,onInput:e[0]||(e[0]=(...t)=>u.updateValue&&u.updateValue(...t)),onBlur:e[1]||(e[1]=(...t)=>u.blurHandler&&u.blurHandler(...t))},t.$attrs,{class:["custom-input",!o.isValid&&"custom-input--error"],placeholder:a.placeholder,style:{width:a.width}}),null,16,i),o.isValid?(0,n.g1)("",!0):((0,n.Wz)(),(0,n.An)("span",l,(0,r.WA)(o.error),1))])}var o={name:"CustomInput",data(){return{isValid:!0,error:""}},props:{modelValue:String,placeholder:{type:String,default:""},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]},width:{type:String,default:"220px"}},inheritAttrs:!1,methods:{updateValue(t){this.$emit("update:modelValue",t.target.value)},validate(t){this.isValid=this.rules.every((e=>{const{hasPassed:a,message:n}=e(t);return a||(this.error=n||this.errorMessage),a}))},blurHandler(){this.validate(this.modelValue)}}},u=a(4100);const d=(0,u.c)(o,[["render",c],["__scopeId","data-v-67102aee"]]);var p=d},9340:function(t,e,a){a.d(e,{c:function(){return d}});var n=a(4108),r=a(9096);const s=["value"],i=["value"];function l(t,e,a,l,c,o){return(0,n.Wz)(),(0,n.An)("select",{value:a.modelValue,onChange:e[0]||(e[0]=(...t)=>o.updateValue&&o.updateValue(...t)),class:(0,r.WN)([a.styleType]),style:(0,r.MN)({width:a.width})},[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(o.formatedItems,(t=>((0,n.Wz)(),(0,n.An)("option",{key:t.value,value:t.value},(0,r.WA)(t.label),9,i)))),128))],46,s)}var c={name:"CustomSelect",props:{modelValue:{type:String,default:""},items:{type:Array,required:!0},styleType:{type:String,default:"custom-select"},width:{type:String,default:"220px"}},computed:{formatedItems(){return this.items.map((t=>"object"===typeof t?t:{value:t,label:t}))}},methods:{updateValue(t){this.$emit("update:modelValue",t.target.value)}}},o=a(4100);const u=(0,o.c)(c,[["render",l],["__scopeId","data-v-4805f5c3"]]);var d=u},940:function(t,e,a){a.d(e,{c:function(){return o}});var n=a(4108);const r={class:"section-spacer"};function s(t,e,a,s,i,l){return(0,n.Wz)(),(0,n.An)("div",r,[(0,n.oF)(t.$slots,"default",{},void 0,!0)])}var i={name:"SectionSpacer"},l=a(4100);const c=(0,l.c)(i,[["render",s],["__scopeId","data-v-0b9152e8"]]);var o=c},1126:function(t,e,a){a.d(e,{c:function(){return u}});var n=a(4108),r=a(9096);const s={class:"star-rating"};function i(t,e,a,i,l,c){return(0,n.Wz)(),(0,n.An)("div",s,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(a.starLimit,(t=>((0,n.Wz)(),(0,n.An)("span",{key:t,class:"star star--outlined"})))),128)),(0,n.QD)("div",{class:"star-rating__colored",style:(0,r.MN)(c.ratingWidthStyle)},[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(a.starLimit,(t=>((0,n.Wz)(),(0,n.An)("span",{key:t,class:"star star--colored"})))),128))],4)])}var l={name:"StarRating",props:{rating:{type:Number,default:0},starLimit:{type:Number,default:5}},computed:{ratingWidth(){return this.rating/this.starLimit*100},ratingWidthStyle(){return`width: ${this.ratingWidth}%;`}}},c=a(4100);const o=(0,c.c)(l,[["render",i],["__scopeId","data-v-4edc9dbe"]]);var u=o},732:function(t,e,a){a.r(e),a.d(e,{default:function(){return G}});var n=a(4108);const r={class:"homepage"},s={key:0};function i(t,e,a,i,l,c){const o=(0,n.E1)("ApartmentsFilterForm"),u=(0,n.E1)("AppContainer"),d=(0,n.E1)("ApartmentsItem"),p=(0,n.E1)("ApartmentsList"),m=(0,n.E1)("AppPagination"),g=(0,n.E1)("SectionWithHeaderSpacer");return(0,n.Wz)(),(0,n.An)("main",r,[(0,n.K2)(g,null,{default:(0,n.Ql)((()=>[(0,n.K2)(u,null,{default:(0,n.Ql)((()=>[(0,n.K2)(o,{onSubmit:c.updateData},null,8,["onSubmit"])])),_:1}),(0,n.K2)(u,null,{default:(0,n.Ql)((()=>[c.apartments.length?((0,n.Wz)(),(0,n.Az)(p,{key:1,items:c.apartments},{apartment:(0,n.Ql)((({apartment:t})=>[(0,n.K2)(d,{_id:t._id,description:t.description,ranking:t.ranking,mainImage:t.mainImage,price:t.price},null,8,["_id","description","ranking","mainImage","price"])])),_:1},8,["items"])):((0,n.Wz)(),(0,n.An)("p",s,"За вашим пошуком не знайдено квартир")),c.apartments.length>0?((0,n.Wz)(),(0,n.Az)(m,{key:2,totalPages:c.totalPage,currentPage:c.currentPage,onPageChange:c.handlePageChange},null,8,["totalPages","currentPage","onPageChange"])):(0,n.g1)("",!0)])),_:1})])),_:1})])}const l={class:"apartments-list"};function c(t,e,a,r,s,i){const c=(0,n.E1)("AppContainer");return(0,n.Wz)(),(0,n.Az)(c,null,{default:(0,n.Ql)((()=>[(0,n.oF)(t.$slots,"title",{},void 0,!0),(0,n.QD)("div",l,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(a.items,(e=>(0,n.oF)(t.$slots,"apartment",{apartment:e},void 0,!0))),256))])])),_:3})}var o=a(3408),u={name:"ApartmentsList",components:{AppContainer:o.c},props:{items:{type:Array,default:()=>[]}}},d=a(4100);const p=(0,d.c)(u,[["render",c],["__scopeId","data-v-3fd2500d"]]);var m=p,g=a(9096);const h={class:"apartments-item"},f={class:"apartments-item__inner"},y=["src"],v={class:"apartments-item__content"},A={class:"apartments-item__description"},_={class:"apartments-item__rating"},P={class:"apartments-item__price"};function b(t,e,a,r,s,i){const l=(0,n.E1)("StarRating"),c=(0,n.E1)("router-link");return(0,n.Wz)(),(0,n.An)("div",h,[(0,n.QD)("div",f,[(0,n.QD)("img",{src:a.mainImage,alt:"",class:"apartments-item__photo"},null,8,y),(0,n.QD)("div",v,[(0,n.QD)("p",A,(0,g.WA)(a.description),1),(0,n.QD)("div",_,[(0,n.K2)(l,{ranking:a.ranking},null,8,["ranking"])]),(0,n.QD)("p",P,(0,g.WA)(a.price.currency)+" "+(0,g.WA)(a.price.value),1),(0,n.K2)(c,{to:{name:"apartment",params:{_id:a._id}},class:"apartments-item__link",onClick:i.clearData},null,8,["to","onClick"])])])])}var W=a(1126),k={name:"ApartmentsItem",components:{StarRating:W.c},props:{_id:{type:String,required:!0},description:{type:String,default:""},ranking:{type:Number,default:0},price:{value:{type:String,default:""},currency:{type:String,required:!0,default:"UAH"}},mainImage:{type:String,default:""}},methods:{clearData(){this.$store.commit("apartment/clearApartment")}}};const S=(0,d.c)(k,[["render",b],["__scopeId","data-v-4acee240"]]);var z=S,C=a(7764);function $(t,e,a,r,s,i){const l=(0,n.E1)("CustomSelect"),c=(0,n.E1)("CustomInput"),o=(0,n.E1)("ButtonVue");return(0,n.Wz)(),(0,n.An)("form",{class:"form",onSubmit:e[2]||(e[2]=(0,C.Y7)(((...t)=>i.handleSubmit&&i.handleSubmit(...t)),["prevent"]))},[(0,n.K2)(l,{items:i.cities,modelValue:s.city,"onUpdate:modelValue":e[0]||(e[0]=t=>s.city=t),class:"custom-select"},null,8,["items","modelValue"]),(0,n.K2)(c,{modelValue:s.price,"onUpdate:modelValue":e[1]||(e[1]=t=>s.price=t),type:"number",placeholder:"Ціна, від",errorMessage:"*Введіть коректне значення",rules:i.rules},null,8,["modelValue","rules"]),(0,n.K2)(o,{class:"btn-dark",type:"submit",label:"Підібрати житло"})],32)}var V=a(3656),I=a(9340),D=a(576),Q=a(8396),L={name:"ApartmentsFilterForm",components:{CustomInput:V.c,CustomSelect:I.c,ButtonVue:D.c},data(){return{price:"",city:""}},computed:{rules(){return[Q.UD,(0,Q.Ck)(10)]},cities(){const t=this.$store.state.technicial.cities;return[{value:"",label:"Всі міста",selected:!1},...t]}},methods:{handleSubmit(t){t.preventDefault(),this.$emit("submit",{city:this.city||"Всі міста",price:this.price||0})}}};const w=(0,d.c)(L,[["render",$],["__scopeId","data-v-42623ead"]]);var N=w,E=a(940);const x={class:"pagination"},M=["disabled"],K={class:"pagination__pages"},F=["onClick"],B=["disabled"];function H(t,e,a,r,s,i){return(0,n.Wz)(),(0,n.An)("div",x,[(0,n.QD)("button",{class:"pagination__btnLeft pageBox",onClick:e[0]||(e[0]=t=>i.changePage(a.currentPage-1)),disabled:1===a.currentPage}," < ",8,M),(0,n.QD)("div",K,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(i.getPageNumbers(),(t=>((0,n.Wz)(),(0,n.An)("button",{key:t,onClick:e=>i.changePage(t),class:(0,g.WN)(a.currentPage===t?"active":"pageBox")},(0,g.WA)(t),11,F)))),128))]),(0,n.QD)("button",{class:"pagination__btnRight pageBox",onClick:e[1]||(e[1]=t=>i.changePage(a.currentPage+1)),disabled:a.currentPage===a.totalPages}," > ",8,B)])}a(3248);var U={name:"AppPagination",props:{totalPages:{type:Number,required:!0},currentPage:{type:Number,required:!0}},methods:{getPageNumbers(){const t=[],e=2;let a=Math.max(1,this.currentPage-e),n=Math.min(this.totalPages,this.currentPage+e);this.currentPage<=e&&(n=Math.min(2*e+1,this.totalPages)),this.currentPage>=this.totalPages-e&&(a=Math.max(this.totalPages-2*e,1));for(let r=a;r<=n;r++)t.push(r);return t},changePage(t){t!==this.currentPage&&this.$emit("pageChange",t)}}};const q=(0,d.c)(U,[["render",H],["__scopeId","data-v-36b5c502"]]);var Z=q,R={name:"HomePage",components:{ApartmentsList:m,ApartmentsItem:z,ApartmentsFilterForm:N,AppContainer:o.c,SectionWithHeaderSpacer:E.c,AppPagination:Z},data(){return{text:"",selectedItem:"",filters:{city:"",price:""}}},computed:{apartments(){return this.$store.state.apartment.apartments},totalPage(){return this.$store.state.apartment.totalPage},currentPage(){return this.$store.state.apartment.currentPage}},async created(){await this.loadApartments(this.currentPage)},methods:{async loadApartments(t){try{this.$store.dispatch("technicial/startLoading");const e={page:t};await this.$store.dispatch("apartment/getApartmentsListData",e)}catch(e){this.$notify({type:"error",title:"We received an error",text:e.message})}finally{this.$store.dispatch("technicial/stopLoading")}},handlePageChange(t){this.loadApartments(t)},async updateData({city:t,price:e}){if(void 0!==t&&void 0!==e)try{this.$store.dispatch("technicial/startLoading");const a={page:this.currentPage,city:t,price:e};await this.$store.dispatch("apartment/getApartmentsListData",a)}catch(a){this.$notify({type:"error",title:"We received an error",text:a.message})}finally{this.$store.dispatch("technicial/stopLoading")}}}};const T=(0,d.c)(R,[["render",i],["__scopeId","data-v-1a5c2fe4"]]);var G=T}}]);
//# sourceMappingURL=732.76702d45.js.map