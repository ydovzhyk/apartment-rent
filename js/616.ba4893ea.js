"use strict";(self["webpackChunkapartment_rent"]=self["webpackChunkapartment_rent"]||[]).push([[616],{8396:function(e,t,a){a.d(t,{Ck:function(){return s},GW:function(){return c},MX:function(){return o},Mw:function(){return i},U3:function(){return u},UD:function(){return r},e4:function(){return l},e9:function(){return n},kL:function(){return d}});const r=e=>({hasPassed:!!e,message:"Будь ласка, заповніть це поле"}),s=e=>t=>({hasPassed:t.length<=e,message:"Ви перевищили ліміт"}),n=e=>({hasPassed:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(e),message:"Невірна адреса пошти"}),o=e=>({hasPassed:/^(?=.*[A-Za-z])(?=.*[\d])[a-zA-Z0-9]{7,256}$/.test(e),message:"Пароль повинен містити одну цифру й один символ"}),u=e=>t=>({hasPassed:t.length<=e,message:"Ви перевищили ліміт"}),i=e=>t=>({hasPassed:t.length<=e,message:"Ви перевищили ліміт, можливо використати 300 символів"}),l=e=>t=>({hasPassed:t.length>=e,message:`Вкажіть більше ніж ${e} символ(а/ів)`}),d=e=>({hasPassed:/^\+?[\d\s\-()]{10,15}$/.test(e),message:"Невірний номер телефону"}),c=e=>{const t=Number(e);return{hasPassed:!isNaN(t)&&t>=1&&t<=20,message:"Число повинно бути від 1 до 20"}}},5356:function(e,t,a){a.d(t,{c:function(){return l}});var r=a(4108);const s={class:"auth-container"};function n(e,t,a,n,o,u){return(0,r.Wz)(),(0,r.An)("div",s,[(0,r.oF)(e.$slots,"default",{},void 0,!0)])}var o={name:"AuthContainer"},u=a(4100);const i=(0,u.c)(o,[["render",n],["__scopeId","data-v-7ce6f064"]]);var l=i},6852:function(e,t,a){a.d(t,{c:function(){return l}});var r=a(4108);const s={class:"auth-section"};function n(e,t,a,n,o,u){return(0,r.Wz)(),(0,r.An)("section",s,[(0,r.oF)(e.$slots,"default",{},void 0,!0)])}var o={name:"AuthSection"},u=a(4100);const i=(0,u.c)(o,[["render",n],["__scopeId","data-v-8ca09406"]]);var l=i},576:function(e,t,a){a.d(t,{c:function(){return d}});var r=a(4108),s=a(9096);const n=["type"];function o(e,t,a,o,u,i){return(0,r.Wz)(),(0,r.An)("button",(0,r.Gu)({type:a.type},e.$attrs,{class:[a.styleType],onClick:t[0]||(t[0]=(...e)=>i.handleClick&&i.handleClick(...e)),style:{height:a.height}}),(0,s.WA)(a.label),17,n)}var u={name:"ButtonVue",props:{type:{type:String,default:"button"},styleType:{type:String,default:"btn-dark"},label:{type:String,default:"Натисніть мене"},height:{type:String,default:"40px"}},methods:{handleClick(){}}},i=a(4100);const l=(0,i.c)(u,[["render",o],["__scopeId","data-v-bfb273a8"]]);var d=l},3656:function(e,t,a){a.d(t,{c:function(){return m}});var r=a(4108),s=a(9096);const n={class:"wrapper-input"},o=["value","placeholder"],u={key:0,class:"custom-input__error"};function i(e,t,a,i,l,d){return(0,r.Wz)(),(0,r.An)("div",n,[(0,r.QD)("input",(0,r.Gu)({value:a.modelValue,onInput:t[0]||(t[0]=(...e)=>d.updateValue&&d.updateValue(...e)),onBlur:t[1]||(t[1]=(...e)=>d.blurHandler&&d.blurHandler(...e))},e.$attrs,{class:["custom-input",!l.isValid&&"custom-input--error"],placeholder:a.placeholder,style:{width:a.width}}),null,16,o),l.isValid?(0,r.g1)("",!0):((0,r.Wz)(),(0,r.An)("span",u,(0,s.WA)(l.error),1))])}var l={name:"CustomInput",data(){return{isValid:!0,error:""}},props:{modelValue:String,placeholder:{type:String,default:""},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]},width:{type:String,default:"220px"}},inheritAttrs:!1,methods:{updateValue(e){this.$emit("update:modelValue",e.target.value)},validate(e){this.isValid=this.rules.every((t=>{const{hasPassed:a,message:r}=t(e);return a||(this.error=r||this.errorMessage),a}))},blurHandler(){this.validate(this.modelValue)}}},d=a(4100);const c=(0,d.c)(l,[["render",i],["__scopeId","data-v-67102aee"]]);var m=c},6526:function(e,t,a){a.d(t,{c:function(){return i}});var r=a(4108);function s(e,t,a,s,n,o){return(0,r.Wz)(),(0,r.Az)((0,r.mk)(o.tagName),{class:"main-title"},{default:(0,r.Ql)((()=>[(0,r.oF)(e.$slots,"default",{},void 0,!0)])),_:3})}var n={name:"MainTitle",props:{level:{type:Number,default:1}},computed:{tagName(){return`h${this.level}`}}},o=a(4100);const u=(0,o.c)(n,[["render",s],["__scopeId","data-v-9b310a5a"]]);var i=u},3448:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var r=a(4108);const s={class:"registration"};function n(e,t,a,n,o,u){const i=(0,r.E1)("AppRegistration"),l=(0,r.E1)("AuthSection");return(0,r.Wz)(),(0,r.An)("main",s,[(0,r.K2)(l,null,{default:(0,r.Ql)((()=>[(0,r.K2)(i)])),_:1})])}var o=a(6852),u=a(7764);function i(e,t,a,s,n,o){const i=(0,r.E1)("MainTitle"),l=(0,r.E1)("CustomInput"),d=(0,r.E1)("ButtonVue"),c=(0,r.E1)("AuthContainer");return(0,r.Wz)(),(0,r.Az)(c,{class:"registration"},{default:(0,r.Ql)((()=>[(0,r.K2)(i,{class:"registration__title"},{default:(0,r.Ql)((()=>[(0,r.mY)("Registration")])),_:1}),(0,r.QD)("form",{class:"registration__form",onSubmit:t[4]||(t[4]=(0,u.Y7)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,r.K2)(l,{ref:"nameInput",modelValue:n.formData.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.formData.username=e),placeholder:"Name",autocomplete:"username",name:"username",rules:o.nameRules,class:"registration__input"},null,8,["modelValue","rules"]),(0,r.K2)(l,{ref:"nameInput",modelValue:n.formData.email,"onUpdate:modelValue":t[1]||(t[1]=e=>n.formData.email=e),placeholder:"Email",autocomplete:"email",name:"email",rules:o.emailRules,class:"registration__input"},null,8,["modelValue","rules"]),(0,r.K2)(l,{ref:"nameInput",modelValue:n.formData.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.formData.password=e),placeholder:"Password",autocomplete:"current-password",type:"password",name:"password",rules:o.passwordRules,class:"registration__input"},null,8,["modelValue","rules"]),(0,r.K2)(l,{ref:"nameInput",modelValue:n.formData.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>n.formData.confirmPassword=e),placeholder:"Confirm password",autocomplete:"current-password",type:"password",name:"password",rules:o.confirmPassword,class:"registration__input"},null,8,["modelValue","rules"]),(0,r.K2)(d,{class:"btn-dark",type:"submit",label:"Зареєструватися",loading:e.loading},null,8,["loading"])],32)])),_:1})}a(3248);var l=a(3656),d=a(576),c=a(5356),m=a(6526),p=a(8396),h=a.p+"img/avatar.4b77e17e.svg",f={name:"AppRegistration",components:{CustomInput:l.c,ButtonVue:d.c,AuthContainer:c.c,MainTitle:m.c},data(){return{userAvatar:"",formData:{username:"",email:"",password:"",confirmPassword:""}}},computed:{rules(){return{emailValidation:p.e9,passwordValidation:p.MX,isRequired:p.UD}},nameRules(){return[this.rules.isRequired]},emailRules(){return[this.rules.isRequired,this.rules.emailValidation]},passwordRules(){return[this.rules.isRequired,this.rules.passwordValidation]},confirmPassword(){return[e=>({hasPassed:e===this.formData.password,message:"Паролі не співпадають"})]}},methods:{async convertImageToBase64(e){const t=await fetch(e),a=await t.blob();return new Promise(((e,t)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(a)}))},async handleSubmit(){this.$store.dispatch("technicial/startLoading");const e=Object.values(this.$refs).every((e=>e.isValid));if(e){const{username:e,email:a,password:r}=this.formData,s=await this.convertImageToBase64(h);try{await this.$store.dispatch("auth/registerUser",{username:e,email:a,password:r,userAvatar:s}),this.resetForm(),this.$router.push({name:"homepage"})}catch(t){this.$notify({type:"error",title:"We received an error",text:t.message})}finally{this.$store.dispatch("technicial/stopLoading")}}},resetForm(){this.formData={username:"",email:"",password:"",confirmPassword:""}}}},g=a(4100);const v=(0,g.c)(f,[["render",i],["__scopeId","data-v-c4897526"]]);var w=v,_={name:"RegistrationPage",components:{AuthSection:o.c,AppRegistration:w}};const y=(0,g.c)(_,[["render",n]]);var V=y}}]);
//# sourceMappingURL=616.ba4893ea.js.map